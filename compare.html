<!DOCTYPE html>
<html>
<head>
    <title>Comparison Test</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #111; color: white; }
        .working { color: #00ff00; }
        .not-working { color: #ff5555; }
        pre { background: #222; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h2>üîç Index.html Debugger</h2>
    
    <div>
        <button onclick="location.href='simple_test.html'">Test simple_test.html</button>
        <button onclick="location.href='compare.html'">Refresh this page</button>
        <button onclick="location.href='index.html'">Test index.html</button>
    </div>
    
    <h3>Current File: <span id="filename"></span></h3>
    
    <div id="output">
        <h4>Tests:</h4>
        <pre id="results">Running tests...</pre>
    </div>
    
    <script>
        const results = document.getElementById('results');
        const filename = window.location.pathname.split('/').pop();
        document.getElementById('filename').innerText = filename;
        
        async function runTests() {
            let log = '';
            
            // Test 1: Check if faceapi is loaded
            log += 'Test 1: faceapi available? ';
            if (typeof faceapi !== 'undefined') {
                log += '‚úÖ YES\n';
            } else {
                log += '‚ùå NO - This is the problem!\n';
            }
            
            // Test 2: Check if main.js is loaded
            log += '\nTest 2: Checking for main.js functions...\n';
            if (typeof computeISI !== 'undefined') {
                log += '‚úÖ computeISI found\n';
            } else {
                log += '‚ùå computeISI NOT found - main.js may not be loaded\n';
            }
            
            // Test 3: Try loading models
            log += '\nTest 3: Attempting to load models...\n';
            try {
                await faceapi.nets.tinyFaceDetector.load(
                    'https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights/tiny_face_detector_model-weights_manifest.json'
                );
                log += '‚úÖ Models loaded successfully\n';
            } catch (err) {
                log += '‚ùå Model load failed: ' + err.message + '\n';
            }
            
            results.innerText = log;
        }
        
        // Run tests immediately
        if (typeof faceapi !== 'undefined') {
            runTests();
        } else {
            results.innerText = 'Waiting for faceapi to load...\nIf this persists, faceapi is not loading.';
            // Try again in 1 second
            setTimeout(() => {
                if (typeof faceapi !== 'undefined') {
                    runTests();
                } else {
                    results.innerText += '\n‚ùå faceapi still not loaded after 1 second';
                }
            }, 1000);
        }
    </script>
    
    <!-- Load face-api -->
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    
    <!-- Try to load main.js -->
    <script src="./main.js"></script>
</body>
</html>